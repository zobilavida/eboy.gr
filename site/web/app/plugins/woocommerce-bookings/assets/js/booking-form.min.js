jQuery(document).ready(function(o){window.console||(window.console={log:function(o){}});var n=[];o(".wc-bookings-booking-form").on("change","input, select",function(i){var t=o(this).attr("name");if(!o(this).closest("fieldset").find(".picker:eq(0)").data("is_range_picker_enabled")||"wc_bookings_field_duration"===t){var s=o(".wc-bookings-booking-form").index(this);$form=o(this).closest("form");var a=!$form.find("[name='wc_bookings_field_start_date_day']").val()&&!$form.find("#wc_bookings_field_start_date").val();if(!jQuery(i.target).hasClass("addon")||!a){var e=$form.find("input.required_for_calculation"),r=!0;o.each(e,function(n,i){o(i).val()||(r=!1)}),r?($form.find(".wc-bookings-booking-cost").block({message:null,overlayCSS:{background:"#fff",backgroundSize:"16px 16px",opacity:.6}}).show(),n[s]=o.ajax({type:"POST",url:booking_form_params.ajax_url,data:{action:"wc_bookings_calculate_costs",form:$form.serialize()},success:function(n){"{"!==n.charAt(0)&&(console.log(n),n="{"+n.split(/\{(.+)?/)[1]),result=o.parseJSON(n),"ERROR"==result.result?($form.find(".wc-bookings-booking-cost").html(result.html),$form.find(".wc-bookings-booking-cost").unblock(),$form.find(".single_add_to_cart_button").addClass("disabled")):"SUCCESS"==result.result?($form.find(".wc-bookings-booking-cost").html(result.html),$form.find(".wc-bookings-booking-cost").unblock(),$form.find(".single_add_to_cart_button").removeClass("disabled")):($form.find(".wc-bookings-booking-cost").hide(),$form.find(".single_add_to_cart_button").addClass("disabled"),console.log(n)),o(document.body).trigger("wc_booking_form_changed")},error:function(){$form.find(".wc-bookings-booking-cost").hide(),$form.find(".single_add_to_cart_button").addClass("disabled")},dataType:"html"})):$form.find(".wc-bookings-booking-cost").hide()}}}).each(function(){o(this).closest("form").find(".single_add_to_cart_button").addClass("disabled")}),o(".single_add_to_cart_button").on("click",function(n){if(o(this).hasClass("disabled"))return alert(booking_form_params.i18n_choose_options),n.preventDefault(),!1}),o(".wc-bookings-booking-form, .wc-bookings-booking-form-button").show().removeAttr("disabled")});
