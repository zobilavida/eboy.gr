function MarkerClusterer(e,t,r){this.extend(MarkerClusterer,google.maps.OverlayView),this.map_=e,this.markers_=[],this.clusters_=[],this.sizes=[53,56,66,78,90],this.styles_=[],this.ready_=!1;var a=r||{};this.gridSize_=a.gridSize||60,this.minClusterSize_=a.minimumClusterSize||2,this.maxZoom_=a.maxZoom||null,this.styles_=a.styles||[],this.imagePath_=a.imagePath||this.MARKER_CLUSTER_IMAGE_PATH_,this.imageExtension_=a.imageExtension||this.MARKER_CLUSTER_IMAGE_EXTENSION_,this.zoomOnClick_=!0,void 0!=a.zoomOnClick&&(this.zoomOnClick_=a.zoomOnClick),this.averageCenter_=!1,void 0!=a.averageCenter&&(this.averageCenter_=a.averageCenter),this.setupStyles_(),this.setMap(e),this.prevZoom_=this.map_.getZoom();var s=this;google.maps.event.addListener(this.map_,"zoom_changed",function(){var e=s.map_.getZoom(),t=s.map_.minZoom||0,r=Math.min(s.map_.maxZoom||100,s.map_.mapTypes[s.map_.getMapTypeId()].maxZoom);e=Math.min(Math.max(e,t),r),s.prevZoom_!=e&&(s.prevZoom_=e,s.resetViewport())}),google.maps.event.addListener(this.map_,"idle",function(){s.redraw()}),t&&(t.length||Object.keys(t).length)&&this.addMarkers(t,!1)}function Cluster(e){this.markerClusterer_=e,this.map_=e.getMap(),this.gridSize_=e.getGridSize(),this.minClusterSize_=e.getMinClusterSize(),this.averageCenter_=e.isAverageCenter(),this.center_=null,this.markers_=[],this.bounds_=null,this.clusterIcon_=new ClusterIcon(this,e.getStyles(),e.getGridSize())}function ClusterIcon(e,t,r){e.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView),this.styles_=t,this.padding_=r||0,this.cluster_=e,this.center_=null,this.map_=e.getMap(),this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(this.map_)}!function(e,t){"use strict";var r=function(){function e(e,t,r,a){return"string"==typeof e&&"function"==typeof t&&(r=parseInt(r||10,10),n("actions",e,t,r,a)),u}function t(){var e=p.call(arguments),t=e.shift();return"string"==typeof t&&l("actions",t,e),u}function r(e,t){return"string"==typeof e&&i("actions",e,t),u}function a(e,t,r,a){return"string"==typeof e&&"function"==typeof t&&(r=parseInt(r||10,10),n("filters",e,t,r,a)),u}function s(){var e=p.call(arguments),t=e.shift();return"string"==typeof t?l("filters",t,e):u}function o(e,t){return"string"==typeof e&&i("filters",e,t),u}function i(e,t,r,a){var s,o,i;if(f[e][t])if(r)if(s=f[e][t],a)for(i=s.length;i--;)o=s[i],o.callback===r&&o.context===a&&s.splice(i,1);else for(i=s.length;i--;)s[i].callback===r&&s.splice(i,1);else f[e][t]=[]}function n(e,t,r,a,s){var o={callback:r,priority:a,context:s},i=f[e][t];i?(i.push(o),i=c(i)):i=[o],f[e][t]=i}function c(e){for(var t,r,a,s=1,o=e.length;s<o;s++){for(t=e[s],r=s;(a=e[r-1])&&a.priority>t.priority;)e[r]=e[r-1],--r;e[r]=t}return e}function l(e,t,r){var a,s,o=f[e][t];if(!o)return"filters"===e&&r[0];if(s=o.length,"filters"===e)for(a=0;a<s;a++)r[0]=o[a].callback.apply(o[a].context,r);else for(a=0;a<s;a++)o[a].callback.apply(o[a].context,r);return"filters"!==e||r[0]}var p=Array.prototype.slice,u={removeFilter:o,applyFilters:s,addFilter:a,removeAction:r,doAction:t,addAction:e},f={actions:{},filters:{}};return u};e.wp=e.wp||{},e.wp.hooks=e.wp.hooks||new r}(window),window.FWP=window.FWP||{},function(e){function t(e){return void 0!==e}var r={facets:{},template:null,settings:{},is_reset:!1,is_refresh:!1,is_bfcache:!1,auto_refresh:!0,soft_refresh:!1,frozen_facets:{},facet_type:{},loaded:!1,jqXHR:!1,extras:{},helper:{},paged:1};for(var a in r)t(FWP[a])||(FWP[a]=r[a]);e(window).on("load",function(){setTimeout(function(){e(window).on("popstate",function(){FWP.is_bfcache&&(FWP.loaded=!1),!FWP.loaded&&!FWP.is_bfcache||FWP.is_refresh||(FWP.is_popstate=!0,FWP.refresh(),FWP.is_popstate=!1)})},0)}),FWP.helper.get_url_var=function(e){for(var e=FWP_JSON.prefix+e,t=FWP.build_query_string(),r=t.split("&"),a=0;a<r.length;a++){var s=r[a].split("=");if(s[0]===e)return s[1]}return!1},FWP.helper.debounce=function(e,t){var r;return function(){var a=this,s=arguments,o=function(){r=null,e.apply(a,s)};clearTimeout(r),r=setTimeout(o,t)}},FWP.helper.serialize=function(e,r){var a=[],r=t(r)?r:"";for(var s in e)""!=e[s]&&a.push(r+encodeURIComponent(s)+"="+encodeURIComponent(e[s]));return a.join("&")},FWP.helper.escape_html=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,function(e){return t[e]}).trim()},FWP.helper.detect_loop=function(e){for(var t=null,r=document.createNodeIterator(e,NodeFilter.SHOW_COMMENT,FWP.helper.node_filter,!1);t=r.nextNode();)if(8===t.nodeType&&"fwp-loop"===t.nodeValue)return t.parentNode;return!1},FWP.helper.node_filter=function(){return NodeFilter.FILTER_ACCEPT},FWP.autoload=function(){FWP.auto_refresh&&!FWP.is_refresh&&FWP.refresh()},FWP.refresh=function(){FWP.is_refresh=!0,FWP.is_reset||FWP.parse_facets(),FWP.loaded||FWP.load_from_hash(),e(document).trigger("facetwp-refresh"),FWP.loaded&&!FWP.is_popstate&&FWP.set_hash(),FWP.loaded||FWP.is_bfcache||!t(FWP_JSON.preload_data)?FWP.fetch_data():FWP.render(FWP_JSON.preload_data),e.each(FWP.frozen_facets,function(e,t){"hard"!==t&&delete FWP.frozen_facets[e]}),FWP.paged=1,FWP.soft_refresh=!1,FWP.is_refresh=!1,FWP.is_reset=!1},FWP.parse_facets=function(){FWP.facets={},e(".facetwp-facet").each(function(){var r=e(this),a=r.attr("data-name"),s=r.attr("data-type");FWP.facet_type[a]=s,wp.hooks.doAction("facetwp/refresh/"+s,r,a);var o=!0;FWP.loaded&&(FWP.soft_refresh||t(FWP.frozen_facets[a]))&&(o=!1),o&&FWP.loading_handler({element:r,facet_name:a,facet_type:s})}),1<FWP.paged&&(FWP.facets.paged=FWP.paged),FWP.extras.per_page&&"default"!==FWP.extras.per_page&&(FWP.facets.per_page=FWP.extras.per_page),FWP.extras.sort&&"default"!==FWP.extras.sort&&(FWP.facets.sort=FWP.extras.sort)},FWP.loading_handler=function(t){if("fade"==FWP_JSON.loading_animation){if(!FWP.loaded){var r=t.element;e(document).on("facetwp-refresh",function(){r.prepend('<div class="facetwp-overlay">'),r.find(".facetwp-overlay").css({width:r.width(),height:r.height()})}),e(document).on("facetwp-loaded",function(){r.find(".facetwp-overlay").remove()})}}else""==FWP_JSON.loading_animation&&t.element.html('<div class="facetwp-loading"></div>')},FWP.build_query_string=function(){var t="",r=[],a=window.location.search.replace("?","").split("&");e.each(a,function(e,t){0!==t.split("=")[0].indexOf(FWP_JSON.prefix)&&r.push(t)}),r=r.join("&");var s=FWP.helper.serialize(FWP.facets,FWP_JSON.prefix);return""!==r&&(t+=r),""!==s&&(t+=(""!==r?"&":"")+s),t},FWP.set_hash=function(){var e=FWP.build_query_string();""!==e&&(e="?"+e),history.pushState&&history.pushState(null,null,window.location.pathname+e),FWP_HTTP.get={},window.location.search.replace("?","").split("&").forEach(function(e){var t=e.split("=");FWP_HTTP.get[t[0]]=t[1]})},FWP.load_from_hash=function(){var r=[],a=window.location.search.replace("?","").split("&");e.each(a,function(e,t){0===t.split("=")[0].indexOf(FWP_JSON.prefix)&&r.push(t.replace(FWP_JSON.prefix,""))}),r=r.join("&"),e.each(FWP.facets,function(e){FWP.facets[e]=[]}),FWP.paged=1,FWP.extras.sort="default",""!==r&&(r=r.split("&"),e.each(r,function(e,r){var a=r.split("=")[0],s=r.split("=")[1];if("paged"===a)FWP.paged=s;else if("per_page"===a||"sort"===a)FWP.extras[a]=s;else if(""!==s){var o=t(FWP.facet_type[a])?FWP.facet_type[a]:"";FWP.facets[a]="search"===o||"autocomplete"===o?decodeURIComponent(s):decodeURIComponent(s).split(",")}}))},FWP.build_post_data=function(){return{facets:JSON.stringify(FWP.facets),frozen_facets:FWP.frozen_facets,http_params:FWP_HTTP,template:FWP.template,extras:FWP.extras,soft_refresh:FWP.soft_refresh?1:0,is_bfcache:FWP.is_bfcache?1:0,first_load:FWP.loaded?0:1,paged:FWP.paged}},FWP.fetch_data=function(){FWP.jqXHR&&4!==FWP.jqXHR.readyState&&FWP.jqXHR.abort();var t="wp"===FWP.template?document.URL:FWP_JSON.ajaxurl,r={type:"POST",dataType:"text",data:{action:"facetwp_refresh",data:FWP.build_post_data()},success:function(t){try{var r=e.parseJSON(t);FWP.render(r)}catch(o){var a=t.indexOf('{"facets');if(-1<a){var s=t.substr(0,a),r=e.parseJSON(t.substr(a));FWP.render(r),console.log(s)}else e(".facetwp-template").text("Unable to auto-detect the post listing"),console.log(t)}}};r=wp.hooks.applyFilters("facetwp/ajax_settings",r),FWP.jqXHR=e.ajax(t,r)},FWP.render=function(r){if("wp"!==FWP.template&&""!==r.template||FWP.loaded||FWP.is_bfcache){var a=r.template;if("wp"===FWP.template){var s=e(r.template).find(".facetwp-template");if(1>s.length){var o=document.createElement("div");o.innerHTML=r.template;var i=FWP.helper.detect_loop(o);i&&(s=e(i).addClass("facetwp-template"))}if(0<s.length)var a=s.html();else var a=FWP_JSON.no_results_text}}else var a=!1;!1!==a&&(wp.hooks.applyFilters("facetwp/template_html",!1,{response:r,html:a})||e(".facetwp-template").html(a)),e.each(r.facets,function(t,r){e(".facetwp-facet-"+t).html(r)}),t(r.counts)&&e(".facetwp-counts").html(r.counts),t(r.pager)&&e(".facetwp-pager").html(r.pager),t(r.per_page)&&(e(".facetwp-per-page").html(r.per_page),"default"!==FWP.extras.per_page&&e(".facetwp-per-page-select").val(FWP.extras.per_page)),t(r.sort)&&(e(".facetwp-sort").html(r.sort),e(".facetwp-sort-select").val(FWP.extras.sort)),e.each(r.settings,function(e,t){FWP.settings[e]=t}),"function"==typeof WPPlaylistView&&e(".facetwp-template .wp-playlist").each(function(){return new WPPlaylistView({el:this})}),e(document).trigger("facetwp-loaded"),wp.hooks.doAction("facetwp/loaded"),FWP.is_bfcache=!0,FWP.loaded=!0},FWP.reset=function(r,a){if(FWP.parse_facets(),t(r)){var s=FWP.facets[r];if(t(a)&&s.length>1){var o=s.indexOf(a);-1<o&&(s.splice(o,1),FWP.facets[r]=s)}else FWP.facets[r]=[],delete FWP.frozen_facets[r]}else e.each(FWP.facets,function(e){FWP.facets[e]=[]}),FWP.extras.sort="default",FWP.frozen_facets={};wp.hooks.doAction("facetwp/reset"),FWP.is_reset=!0,FWP.refresh()},FWP.init=function(){if(0<e(".facetwp-sort").length&&(FWP.extras.sort="default"),0<e(".facetwp-pager").length&&(FWP.extras.pager=!0),0<e(".facetwp-per-page").length&&(FWP.extras.per_page="default"),0<e(".facetwp-counts").length&&(FWP.extras.counts=!0),0<e(".facetwp-selections").length&&(FWP.extras.selections=!0),!(e(".facetwp-template").length>0)){var r=FWP.helper.detect_loop(document.body);if(!r)return;e(r).addClass("facetwp-template")}var a=e(".facetwp-template:first");FWP.template=a.is("[data-name]")?a.attr("data-name"):"wp",0<a.find(".facetwp-facet").length&&console.error('Facets should not be inside the "facetwp-template" container'),wp.hooks.doAction("facetwp/ready"),FWP.extras.selections&&wp.hooks.addAction("facetwp/loaded",function(){var r="";e.each(FWP.facets,function(a,s){if(s.length<1||!t(FWP.settings.labels[a]))return!0;var o=s,i=e(".facetwp-facet-"+a).attr("data-type");o=wp.hooks.applyFilters("facetwp/selections/"+i,o,{el:e(".facetwp-facet-"+a),selected_values:o}),"string"==typeof o?o=[{value:"",label:o}]:t(o[0].label)||(o=[{value:"",label:o[0]}]);var n="";e.each(o,function(e,t){n+='<span class="facetwp-selection-value" data-value="'+t.value+'">'+FWP.helper.escape_html(t.label)+"</span>"}),r+=""+n}),""!==r&&(r="in: "+r),e(".facetwp-selections").html(r)}),e(document).on("click",".facetwp-selections .facetwp-selection-value",function(){if(!FWP.is_refresh){var t=e(this).closest("li").attr("data-facet"),r=e(this).attr("data-value");""!=r?FWP.reset(t,r):FWP.reset(t)}}),e(document).on("click",".facetwp-page",function(){e(".facetwp-page").removeClass("active"),e(this).addClass("active"),FWP.paged=e(this).attr("data-page"),FWP.soft_refresh=!0,FWP.refresh()}),e(document).on("change",".facetwp-per-page-select",function(){FWP.extras.per_page=e(this).val(),FWP.soft_refresh=!0,FWP.autoload()}),e(document).on("change",".facetwp-sort-select",function(){FWP.extras.sort=e(this).val(),FWP.soft_refresh=!0,FWP.autoload()}),FWP.refresh()},e(function(){FWP.init()})}(jQuery),function(e){FWP.logic=FWP.logic||{},e.fn.pVal=function(){var t=e(this).eq(0).val();return t===e(this).attr("placeholder")?"":t},wp.hooks.addAction("facetwp/refresh/autocomplete",function(e,t){var r=e.find(".facetwp-autocomplete").val()||"";FWP.facets[t]=r}),e(document).on("facetwp-loaded",function(){e(".facetwp-autocomplete:not(.ready)").each(function(){var t=e(this),r=t.closest(".facetwp-facet"),a=r.attr("data-name"),s=wp.hooks.applyFilters("facetwp/set_options/autocomplete",{serviceUrl:"wp"===FWP.template?document.URL:FWP_JSON.ajaxurl,type:"POST",minChars:3,deferRequestBy:200,showNoSuggestionNotice:!0,noSuggestionNotice:FWP_JSON.no_results,params:{action:"facetwp_autocomplete_load",facet_name:a,data:FWP.build_post_data()}},{facet_name:a});t.autocomplete(s),t.addClass("ready")})}),e(document).on("keyup",".facetwp-autocomplete",function(e){13===e.which&&FWP.autoload()}),e(document).on("click",".facetwp-autocomplete-update",function(){FWP.autoload()}),wp.hooks.addAction("facetwp/refresh/checkboxes",function(t,r){var a=[];t.find(".facetwp-checkbox.checked").each(function(){a.push(e(this).attr("data-value"))}),FWP.facets[r]=a}),wp.hooks.addFilter("facetwp/selections/checkboxes",function(t,r){var a=[];return e.each(r.selected_values,function(e,t){var s=r.el.find('.facetwp-checkbox[data-value="'+t+'"]').clone();s.find(".facetwp-counter").remove(),s.find(".facetwp-expand").remove(),a.push({value:t,label:s.text()})}),a}),e(document).on("click",".facetwp-type-checkboxes .facetwp-expand",function(t){var r=e(this).parent(".facetwp-checkbox").next(".facetwp-depth");r.toggleClass("visible");var a=r.hasClass("visible")?FWP_JSON.collapse:FWP_JSON.expand;e(this).text(a),t.stopPropagation()}),e(document).on("click",".facetwp-type-checkboxes .facetwp-checkbox:not(.disabled)",function(){e(this).toggleClass("checked"),FWP.autoload()}),e(document).on("click",".facetwp-type-checkboxes .facetwp-toggle",function(){var t=e(this).closest(".facetwp-facet");t.find(".facetwp-toggle").toggleClass("facetwp-hidden"),t.find(".facetwp-overflow").toggleClass("facetwp-hidden")}),e(document).on("facetwp-loaded",function(){e(".facetwp-type-checkboxes .facetwp-overflow").each(function(){var t=e(this).find(".facetwp-checkbox").length,r=e(this).siblings(".facetwp-toggle:first");r.text(r.text().replace("{num}",t))}),e(".facetwp-type-checkboxes").each(function(){var t=e(this),r=t.attr("data-name");Object.keys(FWP.settings).length<1||("yes"===FWP.settings[r].show_expanded&&t.find(".facetwp-depth").addClass("visible"),1>t.find(".facetwp-expand").length&&(t.find(".facetwp-depth").each(function(){var t=e(this).hasClass("visible")?"collapse":"expand";e(this).prev(".facetwp-checkbox").append(' <span class="facetwp-expand">'+FWP_JSON[t]+"</span>")}),t.find(".facetwp-checkbox.checked").each(function(){e(this).parents(".facetwp-depth").each(function(){e(this).prev(".facetwp-checkbox").find(".facetwp-expand").text(FWP_JSON.collapse),e(this).addClass("visible")}),e(this).find(".facetwp-expand").trigger("click")})))})}),wp.hooks.addAction("facetwp/refresh/radio",function(t,r){var a=[];t.find(".facetwp-radio.checked").each(function(){a.push(e(this).attr("data-value"))}),FWP.facets[r]=a}),wp.hooks.addFilter("facetwp/selections/radio",function(t,r){var a=[];return e.each(r.selected_values,function(e,t){var s=r.el.find('.facetwp-radio[data-value="'+t+'"]').clone();s.find(".facetwp-counter").remove(),a.push({value:t,label:s.text()})}),a}),e(document).on("click",".facetwp-type-radio .facetwp-radio:not(.disabled)",function(){var t=e(this).hasClass("checked");e(this).closest(".facetwp-facet").find(".facetwp-radio").removeClass("checked"),t||e(this).addClass("checked"),FWP.autoload()}),wp.hooks.addAction("facetwp/refresh/date_range",function(e,t){var r=e.find(".facetwp-date-min").pVal()||"",a=e.find(".facetwp-date-max").pVal()||"";FWP.facets[t]=""!==r||""!==a?[r,a]:[]}),wp.hooks.addFilter("facetwp/selections/date_range",function(e,t){var r=t.selected_values,a=t.el,s="";return""!==r[0]&&(s+=" from "+a.find(".facetwp-date-min").next().val()),""!==r[1]&&(s+=" to "+a.find(".facetwp-date-max").next().val()),s}),e(document).on("facetwp-loaded",function(){var t=e('.facetwp-type-date_range .facetwp-date:not(".ready, .flatpickr-alt")');if(0!==t.length){var r={altInput:!0,altInputClass:"flatpickr-alt",altFormat:"Y-m-d",disableMobile:!0,locale:FWP_JSON.datepicker.locale,onChange:function(){FWP.autoload()},onReady:function(t,r,a){var s='<div class="flatpickr-clear">'+FWP_JSON.datepicker.clearText+"</div>";e(s).on("click",function(){a.clear(),a.close()}).appendTo(e(a.calendarContainer))}};t.each(function(){var t=e(this),a=t.closest(".facetwp-facet").attr("data-name");r.altFormat=FWP.settings[a].format;var s=wp.hooks.applyFilters("facetwp/set_options/date_range",r,{facet_name:a,element:t});new flatpickr(this,s),t.addClass("ready")})}}),wp.hooks.addAction("facetwp/refresh/dropdown",function(e,t){var r=e.find(".facetwp-dropdown").val();FWP.facets[t]=r?[r]:[]}),wp.hooks.addFilter("facetwp/selections/dropdown",function(e,t){return t.el.find(".facetwp-dropdown option:selected").text()}),e(document).on("change",".facetwp-type-dropdown select",function(){var t=e(this).closest(".facetwp-facet"),r=t.attr("data-name");""!==t.find(":selected").val()&&(FWP.frozen_facets[r]="soft"),FWP.autoload()}),wp.hooks.addAction("facetwp/refresh/fselect",function(t,r){var a=t.find("select").val();null===a||""===a?a=[]:!1===e.isArray(a)&&(a=[a]),FWP.facets[r]=a}),wp.hooks.addFilter("facetwp/selections/fselect",function(t,r){var a=[];return e.each(r.selected_values,function(e,t){var s=r.el.find('.facetwp-dropdown option[value="'+t+'"]').text();a.push({value:t,label:s.replace(/{{(.*?)}}/,"")})}),a}),e(document).on("facetwp-loaded",function(){e(".facetwp-type-fselect select:not(.ready)").each(function(){var t=e(this).closest(".facetwp-facet").attr("data-name"),r=FWP.settings[t],a=wp.hooks.applyFilters("facetwp/set_options/fselect",{placeholder:r.placeholder,overflowText:r.overflowText,searchText:r.searchText,optionFormatter:function(e){return e=e.replace(/{{/g,'<span class="facetwp-counter">'),e=e.replace(/}}/g,"<span>")}},{facet_name:t});e(this).fSelect(a),e(this).addClass("ready")}),e(".fs-wrap.fs-disabled").removeClass("fs-disabled")}),e(document).on("fs:changed",function(t,r){if(r.classList.contains("multiple")){var a=e(r).closest(".facetwp-facet").attr("data-name");"or"===FWP.settings[a].operator&&(FWP.frozen_facets[a]="soft",FWP.auto_refresh&&e(r).addClass("fs-disabled")),FWP.autoload()}}),e(document).on("fs:closed",function(e,t){t.classList.contains("multiple")||FWP.autoload()}),wp.hooks.addAction("facetwp/refresh/hierarchy",function(t,r){var a=[];t.find(".facetwp-link.checked").each(function(){a.push(e(this).attr("data-value"))}),FWP.facets[r]=a}),wp.hooks.addFilter("facetwp/selections/hierarchy",function(e,t){return t.el.find(".facetwp-link.checked").text()}),e(document).on("click",".facetwp-facet .facetwp-link",function(){e(this).closest(".facetwp-facet").find(".facetwp-link").removeClass("checked"),""!==e(this).attr("data-value")&&e(this).addClass("checked"),FWP.autoload()}),e(document).on("click",".facetwp-type-hierarchy .facetwp-toggle",function(){var t=e(this).closest(".facetwp-facet");t.find(".facetwp-toggle").toggleClass("facetwp-hidden"),t.find(".facetwp-overflow").toggleClass("facetwp-hidden")}),wp.hooks.addAction("facetwp/refresh/number_range",function(e,t){var r=e.find(".facetwp-number-min").val()||"",a=e.find(".facetwp-number-max").val()||"";FWP.facets[t]=""!==r||""!==a?[r,a]:[]}),wp.hooks.addFilter("facetwp/selections/number_range",function(e,t){return t.selected_values[0]+" - "+t.selected_values[1]}),e(document).on("click",".facetwp-type-number_range .facetwp-submit",function(){FWP.refresh()}),e(document).on("facetwp-loaded",function(){var t=e(".facetwp-location");t.length<1||t.each(function(t,r){var a=e(this);a.closest(".location-wrap").length<1&&(!function(t){function r(r,s){if("keydown"===r){var o=s;s=function(r){if(13===r.which&&0===e(".pac-container .pac-item-selected").length){var a=e.Event("keydown",{keyCode:40,which:40});o.apply(t,[a])}o.apply(t,[r])}}a.apply(t,[r,s])}var a=t.addEventListener;t.addEventListener=r;var s=FWP_JSON.proximity.autocomplete_options,o=new google.maps.places.Autocomplete(t,s);google.maps.event.addListener(o,"place_changed",function(){var r=o.getPlace();if(void 0!==r.geometry){var a=e(t).closest(".facetwp-facet");a.find(".facetwp-lat").val(r.geometry.location.lat()),a.find(".facetwp-lng").val(r.geometry.location.lng()),FWP.autoload()}})}(a[0]),0===t&&(a.attr("id","facetwp-location"),a.closest(".facetwp-facet").find(".facetwp-radius").attr("id","facetwp-radius")),a.wrap('<div class="col-12 location-wrap"></div>'),a.before('<i class="locate-me"></i>')),a.trigger("keyup")})}),e(document).on("click",".facetwp-type-proximity .locate-me",function(t){var r=e(this),a=r.closest(".facetwp-facet"),s=a.find(".facetwp-location"),o=a.find(".facetwp-lat"),i=a.find(".facetwp-lng");if(r.hasClass("f-reset"))return o.val(""),o.val(""),s.val(""),void FWP.autoload();r.addClass("f-loading"),navigator.geolocation.getCurrentPosition(function(e){var t=e.coords.latitude,a=e.coords.longitude;o.val(t),i.val(a);var n=new google.maps.Geocoder,c={lat:parseFloat(t),lng:parseFloat(a)};n.geocode({location:c},function(e,t){t===google.maps.GeocoderStatus.OK?s.val(e[0].formatted_address):s.val("Your location"),r.addClass("f-reset"),FWP.autoload()}),r.removeClass("f-loading")},function(){r.removeClass("f-loading")})}),e(document).on("keyup",".facetwp-location",function(){e(this).closest(".facetwp-facet").find(".locate-me").toggleClass("f-reset",""!==e(this).val())}),e(document).on("change",".facetwp-radius",function(){""!==e(this).closest(".facetwp-facet").find(".facetwp-location").val()&&FWP.autoload()}),e(document).on("input",".facetwp-radius-slider",function(t){e(this).closest(".facetwp-facet").find(".facetwp-radius-dist").text(t.target.value)}),wp.hooks.addAction("facetwp/refresh/proximity",function(e,t){var r=e.find(".facetwp-lat").val(),a=e.find(".facetwp-lng").val(),s=e.find(".facetwp-radius").val(),o=encodeURIComponent(e.find(".facetwp-location").val());FWP.frozen_facets[t]="hard",FWP.facets[t]=""!==r&&void 0!==r?[r,a,s,o]:[]}),wp.hooks.addFilter("facetwp/selections/proximity",function(e,t){return FWP_JSON.proximity.clearText}),FWP.logic.search={set_button:function(e){var t=e.find(".facetwp-search").val();e.find(".facetwp-btn").toggleClass("f-reset",""!==t)},delay_refresh:FWP.helper.debounce(function(e){FWP.frozen_facets[e]="soft",FWP.autoload()},250)},wp.hooks.addAction("facetwp/refresh/search",function(e,t){var r=e.find(".facetwp-search").val()||"";FWP.facets[t]=r}),e(document).on("facetwp-loaded",function(){e(".facetwp-facet .facetwp-search").each(function(){var t=e(this).closest(".facetwp-facet");FWP.logic.search.set_button(t)})}),e(document).on("keyup",".facetwp-facet .facetwp-search",function(t){var r=e(this).closest(".facetwp-facet"),a=r.attr("data-name");FWP.logic.search.set_button(r),void 0!==FWP.settings[a]&&("yes"===FWP.settings[a].auto_refresh?FWP.logic.search.delay_refresh(a):13===t.keyCode&&(""===r.find(".facetwp-search").val()?r.find(".facetwp-btn").click():FWP.autoload()))}),e(document).on("click",".facetwp-type-search .facetwp-btn",function(t){var r=e(this),a=r.closest(".facetwp-facet"),s=a.attr("data-name");(r.hasClass("f-reset")||""===a.find(".facetwp-search").val())&&(a.find(".facetwp-search").val(""),FWP.facets[s]=[],FWP.set_hash(),FWP.fetch_data())}),wp.hooks.addAction("facetwp/refresh/slider",function(e,t){FWP.facets[t]=[],void 0!==FWP.frozen_facets[t]&&void 0!==e.find(".facetwp-slider")[0].noUiSlider&&(FWP.facets[t]=e.find(".facetwp-slider")[0].noUiSlider.get())}),wp.hooks.addAction("facetwp/set_label/slider",function(e){var t=e.attr("data-name"),r=FWP.settings[t].lower,a=FWP.settings[t].upper,s=FWP.settings[t].format,o={decimal_separator:FWP.settings[t].decimal_separator,thousands_separator:FWP.settings[t].thousands_separator};if(r===a)var i=FWP.settings[t].prefix+nummy(r).format(s,o)+FWP.settings[t].suffix;else var i=FWP.settings[t].prefix+nummy(r).format(s,o)+FWP.settings[t].suffix+" &mdash; "+FWP.settings[t].prefix+nummy(a).format(s,o)+FWP.settings[t].suffix;e.find(".facetwp-slider-label").html(i)}),wp.hooks.addFilter("facetwp/selections/slider",function(e,t){return t.el.find(".facetwp-slider-label").text()}),e(document).on("facetwp-loaded",function(){e(".facetwp-slider:not(.ready)").each(function(){var t=e(this).closest(".facetwp-facet"),r=t.attr("data-name"),a=FWP.settings[r];if(!1!==FWP.helper.get_url_var(r)&&(FWP.frozen_facets[r]="hard"),void 0===e(this).data("options")&&null!==FWP.settings[r].start[0]){if(parseFloat(a.range.min)>=parseFloat(a.range.max))return FWP.settings[r].lower=a.range.min,FWP.settings[r].upper=a.range.max,void wp.hooks.doAction("facetwp/set_label/slider",t);var s=wp.hooks.applyFilters("facetwp/set_options/slider",{range:a.range,start:a.start,step:parseFloat(a.step),connect:!0},{facet_name:r}),o=e(this)[0];noUiSlider.create(o,s),o.noUiSlider.on("update",function(e,a){FWP.settings[r].lower=e[0],FWP.settings[r].upper=e[1],wp.hooks.doAction("facetwp/set_label/slider",t)}),o.noUiSlider.on("set",function(){FWP.frozen_facets[r]="hard",FWP.autoload()}),e(this).addClass("ready")}}),e(".facetwp-type-slider").each(function(){var t=e(this).attr("data-name"),r=e(this).find(".facetwp-slider-reset");e.isEmptyObject(FWP.facets[t])?r.hide():r.show()})}),e(document).on("click",".facetwp-slider-reset",function(){var t=e(this).closest(".facetwp-facet").attr("data-name");FWP.reset(t)})}(jQuery),function(){"use strict";function e(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}var t={};t.parse=function(e){return"string"!=typeof e?{}:(e=e.trim().replace(/^(\?|#|&)/,""),e?e.split("&").reduce(function(e,t){var r=t.replace(/\+/g," ").split("="),a=r.shift(),s=r.length>0?r.join("="):void 0;return a=decodeURIComponent(a),s=void 0===s?null:decodeURIComponent(s),e.hasOwnProperty(a)?Array.isArray(e[a])?e[a].push(s):e[a]=[e[a],s]:e[a]=s,e},{}):{})},t.stringify=function(t){return t?Object.keys(t).sort().map(function(r){var a=t[r];return void 0===a?"":null===a?r:Array.isArray(a)?a.sort().map(function(t){return e(r)+"="+e(t)}).join("&"):e(r)+"="+e(a)}).filter(function(e){return e.length>0}).join("&"):""},self.queryString=t}(),function(e){function t(){e(document).on("click",".woocommerce-pagination a",function(t){t.preventDefault();var r=e(this).attr("href").match(/\/page\/(\d+)/);null!==r&&(FWP.paged=parseInt(r[1]),FWP.soft_refresh=!0,FWP.refresh())}),e(".woocommerce-ordering").off("change","select.orderby"),e(document).on("change",".woocommerce-ordering .orderby",function(t){var r=queryString.parse(window.location.search);r.orderby=e(this).val(),history.pushState(null,null,window.location.pathname+"?"+queryString.stringify(r)),FWP.soft_refresh=!0,FWP.refresh()})}e(document).on("facetwp-refresh",function(){FWP.loaded||t()})}(jQuery),function(){var e,t,r,a,s,o={}.hasOwnProperty,i=[].slice;this.OverlappingMarkerSpiderfier=function(){function e(e,a){var s,i,l;this.map=e,null==a&&(a={}),null==this.constructor.N&&(this.constructor.N=!0,r=google.maps,t=r.event,n=r.MapTypeId,c.keepSpiderfied=!1,c.ignoreMapClick=!1,c.markersWontHide=!1,c.markersWontMove=!1,c.basicFormatEvents=!1,c.nearbyDistance=20,c.circleSpiralSwitchover=9,c.circleFootSeparation=23,c.circleStartAngle=p/12,c.spiralFootSeparation=26,c.spiralLengthStart=11,c.spiralLengthFactor=4,c.spiderfiedZIndex=r.Marker.MAX_ZINDEX+2e4,c.highlightedLegZIndex=r.Marker.MAX_ZINDEX+1e4,c.usualLegZIndex=r.Marker.MAX_ZINDEX+1,c.legWeight=1.5,c.legColors={usual:{},highlighted:{}},l=c.legColors.usual,i=c.legColors.highlighted,l[n.HYBRID]=l[n.SATELLITE]="#fff",i[n.HYBRID]=i[n.SATELLITE]="#f00",l[n.TERRAIN]=l[n.ROADMAP]="#444",i[n.TERRAIN]=i[n.ROADMAP]="#f00",this.constructor.j=function(e){return this.setMap(e)},this.constructor.j.prototype=new r.OverlayView,this.constructor.j.prototype.draw=function(){});for(s in a)o.call(a,s)&&(i=a[s],this[s]=i);this.g=new this.constructor.j(this.map),this.C(),this.c={},this.B=this.l=null,this.addListener("click",function(e,r){return t.trigger(e,"spider_click",r)}),this.addListener("format",function(e,r){return t.trigger(e,"spider_format",r)}),this.ignoreMapClick||t.addListener(this.map,"click",function(e){return function(){return e.unspiderfy()}}(this)),t.addListener(this.map,"maptypeid_changed",function(e){return function(){return e.unspiderfy()}}(this)),t.addListener(this.map,"zoom_changed",function(e){return function(){if(e.unspiderfy(),!e.basicFormatEvents)return e.h()}}(this))}var t,r,a,s,n,c,l,p,u;for(c=e.prototype,l=[e,c],a=0,s=l.length;a<s;a++)u=l[a],u.VERSION="1.0.3";return p=2*Math.PI,r=t=n=null,e.markerStatus={SPIDERFIED:"SPIDERFIED",SPIDERFIABLE:"SPIDERFIABLE",UNSPIDERFIABLE:"UNSPIDERFIABLE",UNSPIDERFIED:"UNSPIDERFIED"},c.C=function(){this.a=[],this.s=[]},c.addMarker=function(e,t){return e.setMap(this.map),this.trackMarker(e,t)},c.trackMarker=function(e,r){var a;return null!=e._oms?this:(e._oms=!0,a=[t.addListener(e,"click",function(t){return function(r){return t.V(e,r)}}(this))],this.markersWontHide||a.push(t.addListener(e,"visible_changed",function(t){return function(){return t.D(e,!1)}}(this))),this.markersWontMove||a.push(t.addListener(e,"position_changed",function(t){return function(){return t.D(e,!0)}}(this))),null!=r&&a.push(t.addListener(e,"spider_click",r)),this.s.push(a),this.a.push(e),this.basicFormatEvents?this.trigger("format",e,this.constructor.markerStatus.UNSPIDERFIED):(this.trigger("format",e,this.constructor.markerStatus.UNSPIDERFIABLE),this.h()),this)},c.D=function(e,t){if(!this.J&&!this.K)return null==e._omsData||!t&&e.getVisible()||this.unspiderfy(t?e:null),this.h()},c.getMarkers=function(){return this.a.slice(0)},c.removeMarker=function(e){return this.forgetMarker(e),e.setMap(null)},c.forgetMarker=function(e){var r,a,s,o,i;if(null!=e._omsData&&this.unspiderfy(),0>(r=this.A(this.a,e)))return this;for(i=this.s.splice(r,1)[0],a=0,s=i.length;a<s;a++)o=i[a],t.removeListener(o);return delete e._oms,this.a.splice(r,1),this.h(),this},c.removeAllMarkers=c.clearMarkers=function(){var e,t,r,a;for(a=this.getMarkers(),this.forgetAllMarkers(),e=0,t=a.length;e<t;e++)r=a[e],r.setMap(null);return this},c.forgetAllMarkers=function(){var e,r,a,s,o,i,n,c;for(this.unspiderfy(),c=this.a,e=r=0,a=c.length;r<a;e=++r){for(i=c[e],o=this.s[e],n=0,e=o.length;n<e;n++)s=o[n],t.removeListener(s);delete i._oms}return this.C(),this},c.addListener=function(e,t){var r;return(null!=(r=this.c)[e]?r[e]:r[e]=[]).push(t),this},c.removeListener=function(e,t){var r;return r=this.A(this.c[e],t),0>r||this.c[e].splice(r,1),this},c.clearListeners=function(e){return this.c[e]=[],this},c.trigger=function(){var e,t,r,a,s,o;for(t=arguments[0],e=2<=arguments.length?i.call(arguments,1):[],t=null!=(r=this.c[t])?r:[],o=[],a=0,s=t.length;a<s;a++)r=t[a],o.push(r.apply(null,e));return o},c.L=function(e,t){var a,s,o,i,n;for(i=this.circleFootSeparation*(2+e)/p,s=p/e,n=[],a=o=0;0<=e?o<e:o>e;a=0<=e?++o:--o)a=this.circleStartAngle+a*s,n.push(new r.Point(t.x+i*Math.cos(a),t.y+i*Math.sin(a)));return n},c.M=function(e,t){var a,s,o,i,n;for(i=this.spiralLengthStart,a=0,n=[],s=o=0;0<=e?o<e:o>e;s=0<=e?++o:--o)a+=this.spiralFootSeparation/i+5e-4*s,s=new r.Point(t.x+i*Math.cos(a),t.y+i*Math.sin(a)),i+=p*this.spiralLengthFactor/a,n.push(s);return n},c.V=function(e,t){var r,a,s,o,i,n,c,l,p;if((n=null!=e._omsData)&&this.keepSpiderfied||this.unspiderfy(),n||this.map.getStreetView().getVisible()||"GoogleEarthAPI"===this.map.getMapTypeId())return this.trigger("click",e,t);for(n=[],c=[],r=this.nearbyDistance,l=r*r,i=this.f(e.position),p=this.a,r=0,a=p.length;r<a;r++)s=p[r],null!=s.map&&s.getVisible()&&(o=this.f(s.position),this.i(o,i)<l?n.push({R:s,G:o}):c.push(s));return 1===n.length?this.trigger("click",e,t):this.W(n,c)},c.markersNearMarker=function(e,t){var r,a,s,o,i,n,c,l,p,u;if(null==t&&(t=!1),null==this.g.getProjection())throw"Must wait for 'idle' event on map before calling markersNearMarker";for(r=this.nearbyDistance,c=r*r,i=this.f(e.position),n=[],l=this.a,r=0,
a=l.length;r<a&&!((s=l[r])!==e&&null!=s.map&&s.getVisible()&&(o=this.f(null!=(p=null!=(u=s._omsData)?u.v:void 0)?p:s.position),this.i(o,i)<c&&(n.push(s),t)));r++);return n},c.F=function(){var e,t,r,a,s,o,i,n,c,l,p;if(null==this.g.getProjection())throw"Must wait for 'idle' event on map before calling markersNearAnyOtherMarker";c=this.nearbyDistance,c*=c;var u;for(s=this.a,u=[],l=0,t=s.length;l<t;l++)a=s[l],u.push({H:this.f(null!=(e=null!=(r=a._omsData)?r.v:void 0)?e:a.position),b:!1});for(l=this.a,e=r=0,a=l.length;r<a;e=++r)if(t=l[e],null!=t.getMap()&&t.getVisible()&&(o=u[e],!o.b))for(p=this.a,t=n=0,s=p.length;n<s;t=++n)if(i=p[t],t!==e&&null!=i.getMap()&&i.getVisible()&&(i=u[t],(!(t<e)||i.b)&&this.i(o.H,i.H)<c)){o.b=i.b=!0;break}return u},c.markersNearAnyOtherMarker=function(){var e,t,r,a,s,o,i;for(s=this.F(),o=this.a,i=[],e=t=0,r=o.length;t<r;e=++t)a=o[e],s[e].b&&i.push(a);return i},c.setImmediate=function(e){return window.setTimeout(e,0)},c.h=function(){if(!this.basicFormatEvents&&null==this.l)return this.l=this.setImmediate(function(e){return function(){return e.l=null,null!=e.g.getProjection()?e.w():null!=e.B?void 0:e.B=t.addListenerOnce(e.map,"idle",function(){return e.w()})}}(this))},c.w=function(){var e,t,r,a,s,o,i;if(this.basicFormatEvents){for(s=[],t=0,r=markers.length;t<r;t++)a=markers[t],e=null!=a._omsData?"SPIDERFIED":"UNSPIDERFIED",s.push(this.trigger("format",a,this.constructor.markerStatus[e]));return s}for(s=this.F(),o=this.a,i=[],e=r=0,t=o.length;r<t;e=++r)a=o[e],e=null!=a._omsData?"SPIDERFIED":s[e].b?"SPIDERFIABLE":"UNSPIDERFIABLE",i.push(this.trigger("format",a,this.constructor.markerStatus[e]));return i},c.P=function(e){return{m:function(t){return function(){return e._omsData.o.setOptions({strokeColor:t.legColors.highlighted[t.map.mapTypeId],zIndex:t.highlightedLegZIndex})}}(this),u:function(t){return function(){return e._omsData.o.setOptions({strokeColor:t.legColors.usual[t.map.mapTypeId],zIndex:t.usualLegZIndex})}}(this)}},c.W=function(e,a){var s,o,i,n,c,l,p,u,f,h;return this.J=!0,h=e.length,s=this.T(function(){var t,r,a;for(a=[],t=0,r=e.length;t<r;t++)u=e[t],a.push(u.G);return a}()),n=h>=this.circleSpiralSwitchover?this.M(h,s).reverse():this.L(h,s),s=function(){var a,s,u;for(u=[],a=0,s=n.length;a<s;a++)i=n[a],o=this.U(i),f=this.S(e,function(e){return function(t){return e.i(t.G,i)}}(this)),p=f.R,l=new r.Polyline({map:this.map,path:[p.position,o],strokeColor:this.legColors.usual[this.map.mapTypeId],strokeWeight:this.legWeight,zIndex:this.usualLegZIndex}),p._omsData={v:p.getPosition(),X:p.getZIndex(),o:l},this.legColors.highlighted[this.map.mapTypeId]!==this.legColors.usual[this.map.mapTypeId]&&(c=this.P(p),p._omsData.O={m:t.addListener(p,"mouseover",c.m),u:t.addListener(p,"mouseout",c.u)}),this.trigger("format",p,this.constructor.markerStatus.SPIDERFIED),p.setPosition(o),p.setZIndex(Math.round(this.spiderfiedZIndex+i.y)),u.push(p);return u}.call(this),delete this.J,this.I=!0,this.trigger("spiderfy",s,a)},c.unspiderfy=function(e){var r,a,s,o,i,n,c;if(null==e&&(e=null),null==this.I)return this;for(this.K=!0,c=[],i=[],n=this.a,r=0,a=n.length;r<a;r++)o=n[r],null!=o._omsData?(o._omsData.o.setMap(null),o!==e&&o.setPosition(o._omsData.v),o.setZIndex(o._omsData.X),s=o._omsData.O,null!=s&&(t.removeListener(s.m),t.removeListener(s.u)),delete o._omsData,o!==e&&(s=this.basicFormatEvents?"UNSPIDERFIED":"SPIDERFIABLE",this.trigger("format",o,this.constructor.markerStatus[s])),c.push(o)):i.push(o);return delete this.K,delete this.I,this.trigger("unspiderfy",c,i),this},c.i=function(e,t){var r,a;return r=e.x-t.x,a=e.y-t.y,r*r+a*a},c.T=function(e){var t,a,s,o,i;for(t=o=i=0,a=e.length;t<a;t++)s=e[t],o+=s.x,i+=s.y;return e=e.length,new r.Point(o/e,i/e)},c.f=function(e){return this.g.getProjection().fromLatLngToDivPixel(e)},c.U=function(e){return this.g.getProjection().fromDivPixelToLatLng(e)},c.S=function(e,t){var r,a,s,o,i,n;for(s=i=0,n=e.length;i<n;s=++i)o=e[s],o=t(o),(void 0===r||null===r||o<a)&&(a=o,r=s);return e.splice(r,1)[0]},c.A=function(e,t){var r,a,s;if(null!=e.indexOf)return e.indexOf(t);for(r=a=0,s=e.length;a<s;r=++a)if(e[r]===t)return r;return-1},e}(),t=/(\?.*(&|&amp;)|\?)spiderfier_callback=(\w+)/,e=document.currentScript,null==e&&(e=function(){var e,r,a,o,i;for(a=document.getElementsByTagName("script"),i=[],e=0,r=a.length;e<r;e++)s=a[e],null!=(o=s.getAttribute("src"))&&o.match(t)&&i.push(s);return i}()[0]),null!=e&&(e=null!=(r=e.getAttribute("src"))&&null!=(a=r.match(t))?a[3]:void 0)&&"function"==typeof window[e]&&window[e](),"function"==typeof window.spiderfier_callback&&window.spiderfier_callback()}.call(this),MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_PATH_="../images/m",MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_="png",MarkerClusterer.prototype.extend=function(e,t){return function(e){for(var t in e.prototype)this.prototype[t]=e.prototype[t];return this}.apply(e,[t])},MarkerClusterer.prototype.onAdd=function(){this.setReady_(!0)},MarkerClusterer.prototype.draw=function(){},MarkerClusterer.prototype.setupStyles_=function(){if(!this.styles_.length)for(var e,t=0;e=this.sizes[t];t++)this.styles_.push({url:this.imagePath_+(t+1)+"."+this.imageExtension_,height:e,width:e})},MarkerClusterer.prototype.fitMapToMarkers=function(){for(var e,t=this.getMarkers(),r=new google.maps.LatLngBounds,a=0;e=t[a];a++)r.extend(e.getPosition());this.map_.fitBounds(r)},MarkerClusterer.prototype.setStyles=function(e){this.styles_=e},MarkerClusterer.prototype.getStyles=function(){return this.styles_},MarkerClusterer.prototype.isZoomOnClick=function(){return this.zoomOnClick_},MarkerClusterer.prototype.isAverageCenter=function(){return this.averageCenter_},MarkerClusterer.prototype.getMarkers=function(){return this.markers_},MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length},MarkerClusterer.prototype.setMaxZoom=function(e){this.maxZoom_=e},MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_},MarkerClusterer.prototype.calculator_=function(e,t){for(var r=0,a=e.length,s=a;0!==s;)s=parseInt(s/10,10),r++;return r=Math.min(r,t),{text:a,index:r}},MarkerClusterer.prototype.setCalculator=function(e){this.calculator_=e},MarkerClusterer.prototype.getCalculator=function(){return this.calculator_},MarkerClusterer.prototype.addMarkers=function(e,t){if(e.length)for(var r,a=0;r=e[a];a++)this.pushMarkerTo_(r);else if(Object.keys(e).length)for(var r in e)this.pushMarkerTo_(e[r]);t||this.redraw()},MarkerClusterer.prototype.pushMarkerTo_=function(e){if(e.isAdded=!1,e.draggable){var t=this;google.maps.event.addListener(e,"dragend",function(){e.isAdded=!1,t.repaint()})}this.markers_.push(e)},MarkerClusterer.prototype.addMarker=function(e,t){this.pushMarkerTo_(e),t||this.redraw()},MarkerClusterer.prototype.removeMarker_=function(e){var t=-1;if(this.markers_.indexOf)t=this.markers_.indexOf(e);else for(var r,a=0;r=this.markers_[a];a++)if(r==e){t=a;break}return-1!=t&&(e.setMap(null),this.markers_.splice(t,1),!0)},MarkerClusterer.prototype.removeMarker=function(e,t){var r=this.removeMarker_(e);return!(t||!r)&&(this.resetViewport(),this.redraw(),!0)},MarkerClusterer.prototype.removeMarkers=function(e,t){for(var r,a=e===this.getMarkers()?e.slice():e,s=!1,o=0;r=a[o];o++){var i=this.removeMarker_(r);s=s||i}if(!t&&s)return this.resetViewport(),this.redraw(),!0},MarkerClusterer.prototype.setReady_=function(e){this.ready_||(this.ready_=e,this.createClusters_())},MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length},MarkerClusterer.prototype.getMap=function(){return this.map_},MarkerClusterer.prototype.setMap=function(e){this.map_=e},MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_},MarkerClusterer.prototype.setGridSize=function(e){this.gridSize_=e},MarkerClusterer.prototype.getMinClusterSize=function(){return this.minClusterSize_},MarkerClusterer.prototype.setMinClusterSize=function(e){this.minClusterSize_=e},MarkerClusterer.prototype.getExtendedBounds=function(e){var t=this.getProjection(),r=new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()),a=new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()),s=t.fromLatLngToDivPixel(r);s.x+=this.gridSize_,s.y-=this.gridSize_;var o=t.fromLatLngToDivPixel(a);o.x-=this.gridSize_,o.y+=this.gridSize_;var i=t.fromDivPixelToLatLng(s),n=t.fromDivPixelToLatLng(o);return e.extend(i),e.extend(n),e},MarkerClusterer.prototype.isMarkerInBounds_=function(e,t){return t.contains(e.getPosition())},MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers_=[]},MarkerClusterer.prototype.resetViewport=function(e){for(var t,r=0;t=this.clusters_[r];r++)t.remove();for(var a,r=0;a=this.markers_[r];r++)a.isAdded=!1,e&&a.setMap(null);this.clusters_=[]},MarkerClusterer.prototype.repaint=function(){var e=this.clusters_.slice();this.clusters_.length=0,this.resetViewport(),this.redraw(),window.setTimeout(function(){for(var t,r=0;t=e[r];r++)t.remove()},0)},MarkerClusterer.prototype.redraw=function(){this.createClusters_()},MarkerClusterer.prototype.distanceBetweenPoints_=function(e,t){if(!e||!t)return 0;var r=(t.lat()-e.lat())*Math.PI/180,a=(t.lng()-e.lng())*Math.PI/180,s=Math.sin(r/2)*Math.sin(r/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(a/2)*Math.sin(a/2);return 2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s))*6371},MarkerClusterer.prototype.addToClosestCluster_=function(e){for(var t,r=4e4,a=null,s=(e.getPosition(),0);t=this.clusters_[s];s++){var o=t.getCenter();if(o){var i=this.distanceBetweenPoints_(o,e.getPosition());i<r&&(r=i,a=t)}}if(a&&a.isMarkerInClusterBounds(e))a.addMarker(e);else{var t=new Cluster(this);t.addMarker(e),this.clusters_.push(t)}},MarkerClusterer.prototype.createClusters_=function(){if(this.ready_)for(var e,t=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast()),r=this.getExtendedBounds(t),a=0;e=this.markers_[a];a++)!e.isAdded&&this.isMarkerInBounds_(e,r)&&this.addToClosestCluster_(e)},Cluster.prototype.isMarkerAlreadyAdded=function(e){if(this.markers_.indexOf)return-1!=this.markers_.indexOf(e);for(var t,r=0;t=this.markers_[r];r++)if(t==e)return!0;return!1},Cluster.prototype.addMarker=function(e){if(this.isMarkerAlreadyAdded(e))return!1;if(this.center_){if(this.averageCenter_){var t=this.markers_.length+1,r=(this.center_.lat()*(t-1)+e.getPosition().lat())/t,a=(this.center_.lng()*(t-1)+e.getPosition().lng())/t;this.center_=new google.maps.LatLng(r,a),this.calculateBounds_()}}else this.center_=e.getPosition(),this.calculateBounds_();e.isAdded=!0,this.markers_.push(e);var s=this.markers_.length;if(s<this.minClusterSize_&&e.getMap()!=this.map_&&e.setMap(this.map_),s==this.minClusterSize_)for(var o=0;o<s;o++)this.markers_[o].setMap(null);return s>=this.minClusterSize_&&e.setMap(null),this.updateIcon(),!0},Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_},Cluster.prototype.getBounds=function(){for(var e,t=new google.maps.LatLngBounds(this.center_,this.center_),r=this.getMarkers(),a=0;e=r[a];a++)t.extend(e.getPosition());return t},Cluster.prototype.remove=function(){this.clusterIcon_.remove(),this.markers_.length=0,delete this.markers_},Cluster.prototype.getSize=function(){return this.markers_.length},Cluster.prototype.getMarkers=function(){return this.markers_},Cluster.prototype.getCenter=function(){return this.center_},Cluster.prototype.calculateBounds_=function(){var e=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(e)},Cluster.prototype.isMarkerInClusterBounds=function(e){return this.bounds_.contains(e.getPosition())},Cluster.prototype.getMap=function(){return this.map_},Cluster.prototype.updateIcon=function(){var e=this.map_.getZoom(),t=this.markerClusterer_.getMaxZoom();if(t&&e>t)for(var r,a=0;r=this.markers_[a];a++)r.setMap(this.map_);else{if(this.markers_.length<this.minClusterSize_)return void this.clusterIcon_.hide();var s=this.markerClusterer_.getStyles().length,o=this.markerClusterer_.getCalculator()(this.markers_,s);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.setSums(o),this.clusterIcon_.show()}},ClusterIcon.prototype.triggerClusterClick=function(){var e=this.cluster_.getMarkerClusterer();google.maps.event.trigger(e,"clusterclick",this.cluster_),e.isZoomOnClick()&&this.map_.fitBounds(this.cluster_.getBounds())},ClusterIcon.prototype.onAdd=function(){if(this.div_=document.createElement("DIV"),this.visible_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(e),this.div_.innerHTML=this.sums_.text}this.getPanes().overlayMouseTarget.appendChild(this.div_);var t=this;google.maps.event.addDomListener(this.div_,"click",function(){t.triggerClusterClick()})},ClusterIcon.prototype.getPosFromLatLng_=function(e){var t=this.getProjection().fromLatLngToDivPixel(e);return t.x-=parseInt(this.width_/2,10),t.y-=parseInt(this.height_/2,10),t},ClusterIcon.prototype.draw=function(){if(this.visible_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.top=e.y+"px",this.div_.style.left=e.x+"px"}},ClusterIcon.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},ClusterIcon.prototype.show=function(){if(this.div_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(e),this.div_.style.display=""}this.visible_=!0},ClusterIcon.prototype.remove=function(){this.setMap(null)},ClusterIcon.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),this.div_.parentNode.removeChild(this.div_),this.div_=null)},ClusterIcon.prototype.setSums=function(e){this.sums_=e,this.text_=e.text,this.index_=e.index,this.div_&&(this.div_.innerHTML=e.text),this.useStyle()},ClusterIcon.prototype.useStyle=function(){var e=Math.max(0,this.sums_.index-1);e=Math.min(this.styles_.length-1,e);var t=this.styles_[e];this.url_=t.url,this.height_=t.height,this.width_=t.width,this.textColor_=t.textColor,this.anchor_=t.anchor,this.textSize_=t.textSize,this.backgroundPosition_=t.backgroundPosition},ClusterIcon.prototype.setCenter=function(e){this.center_=e},ClusterIcon.prototype.createCss=function(e){var t=[];t.push("background-image:url("+this.url_+");");var r=this.backgroundPosition_?this.backgroundPosition_:"0 0";t.push("background-position:"+r+";"),"object"==typeof this.anchor_?("number"==typeof this.anchor_[0]&&this.anchor_[0]>0&&this.anchor_[0]<this.height_?t.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;"):t.push("height:"+this.height_+"px; line-height:"+this.height_+"px;"),"number"==typeof this.anchor_[1]&&this.anchor_[1]>0&&this.anchor_[1]<this.width_?t.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;"):t.push("width:"+this.width_+"px; text-align:center;")):t.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;");var a=this.textColor_?this.textColor_:"black",s=this.textSize_?this.textSize_:11;return t.push("cursor:pointer; top:"+e.y+"px; left:"+e.x+"px; color:"+a+"; position:absolute; font-size:"+s+"px; font-family:Arial,sans-serif; font-weight:bold"),t.join("")},window.MarkerClusterer=MarkerClusterer,MarkerClusterer.prototype.addMarker=MarkerClusterer.prototype.addMarker,MarkerClusterer.prototype.addMarkers=MarkerClusterer.prototype.addMarkers,MarkerClusterer.prototype.clearMarkers=MarkerClusterer.prototype.clearMarkers,MarkerClusterer.prototype.fitMapToMarkers=MarkerClusterer.prototype.fitMapToMarkers,MarkerClusterer.prototype.getCalculator=MarkerClusterer.prototype.getCalculator,MarkerClusterer.prototype.getGridSize=MarkerClusterer.prototype.getGridSize,MarkerClusterer.prototype.getExtendedBounds=MarkerClusterer.prototype.getExtendedBounds,MarkerClusterer.prototype.getMap=MarkerClusterer.prototype.getMap,MarkerClusterer.prototype.getMarkers=MarkerClusterer.prototype.getMarkers,MarkerClusterer.prototype.getMaxZoom=MarkerClusterer.prototype.getMaxZoom,MarkerClusterer.prototype.getStyles=MarkerClusterer.prototype.getStyles,MarkerClusterer.prototype.getTotalClusters=MarkerClusterer.prototype.getTotalClusters,MarkerClusterer.prototype.getTotalMarkers=MarkerClusterer.prototype.getTotalMarkers,MarkerClusterer.prototype.redraw=MarkerClusterer.prototype.redraw,MarkerClusterer.prototype.removeMarker=MarkerClusterer.prototype.removeMarker,MarkerClusterer.prototype.removeMarkers=MarkerClusterer.prototype.removeMarkers,MarkerClusterer.prototype.resetViewport=MarkerClusterer.prototype.resetViewport,MarkerClusterer.prototype.repaint=MarkerClusterer.prototype.repaint,MarkerClusterer.prototype.setCalculator=MarkerClusterer.prototype.setCalculator,MarkerClusterer.prototype.setGridSize=MarkerClusterer.prototype.setGridSize,MarkerClusterer.prototype.setMaxZoom=MarkerClusterer.prototype.setMaxZoom,MarkerClusterer.prototype.onAdd=MarkerClusterer.prototype.onAdd,MarkerClusterer.prototype.draw=MarkerClusterer.prototype.draw,Cluster.prototype.getCenter=Cluster.prototype.getCenter,Cluster.prototype.getSize=Cluster.prototype.getSize,Cluster.prototype.getMarkers=Cluster.prototype.getMarkers,ClusterIcon.prototype.onAdd=ClusterIcon.prototype.onAdd,ClusterIcon.prototype.draw=ClusterIcon.prototype.draw,ClusterIcon.prototype.onRemove=ClusterIcon.prototype.onRemove,Object.keys=Object.keys||function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t};var FWP_MAP=FWP_MAP||{};!function(e){function t(){FWP_MAP.is_filtering&&FWP.autoload()}function r(){FWP_MAP.oms.removeAllMarkers(),FWP_MAP.markersArray=[],void 0!==FWP_MAP.mc&&FWP_MAP.mc.clearMarkers()}FWP_MAP.markersArray=[],FWP_MAP.activeMarker=null,FWP_MAP.is_filtering=!1,wp.hooks.addAction("facetwp/refresh/map",function(e,t){var r=[];FWP_MAP.is_filtering&&(r=FWP_MAP.map.getBounds().toUrlValue().split(",")),FWP.facets[t]=r,FWP.frozen_facets[t]="hard"}),wp.hooks.addAction("facetwp/reset",function(){e.each(FWP.facet_type,function(e,t){"map"===t&&(FWP.frozen_facets[e]="hard")})}),wp.hooks.addFilter("facetwp/selections/map",function(e,t){return FWP_JSON.map.resetText}),e(document).on("click",".facetwp-map-filtering",function(){var t=e(this);t.hasClass("enabled")?(t.text(FWP_JSON.map.filterText),FWP_MAP.is_filtering=!1,FWP.autoload()):(t.text(FWP_JSON.map.resetText),FWP_MAP.is_filtering=!0),t.toggleClass("enabled")}),e(document).on("facetwp-loaded",function(){if(void 0!==FWP.settings.map&&""!==FWP.settings.map){FWP.loaded?r():(FWP_MAP.map=new google.maps.Map(document.getElementById("facetwp-map"),FWP.settings.map.init),FWP_MAP.map.addListener("dragend",function(){t()}),FWP_MAP.map.addListener("zoom_changed",function(){t()}),google.maps.event.addDomListener(window,"resize",function(){var e=FWP_MAP.map.getCenter();google.maps.event.trigger(FWP_MAP.map,"resize"),FWP_MAP.map.setCenter(e)}),FWP_MAP.oms=new OverlappingMarkerSpiderfier(FWP_MAP.map,{markersWontMove:!0,markersWontHide:!0,basicFormatEvents:!0})),FWP_MAP.bounds=new google.maps.LatLngBounds,e.each(FWP.settings.map.locations,function(t,r){var a=e.extend({map:FWP_MAP.map,position:r.position,info:new google.maps.InfoWindow({content:r.content})},r),s=new google.maps.Marker(a);google.maps.event.addListener(s,"spider_click",function(){null!==FWP_MAP.activeMarker&&FWP_MAP.activeMarker.info.close(),s.info.open(FWP_MAP.map,s),FWP_MAP.activeMarker=s}),FWP_MAP.oms.addMarker(s),FWP_MAP.markersArray.push(s),FWP_MAP.bounds.extend(s.getPosition())});var a=FWP.settings.map.config;"yes"===a.cluster&&(FWP_MAP.mc=new MarkerClusterer(FWP_MAP.map,FWP_MAP.markersArray,{imagePath:FWP.settings.map.imagePath,imageExtension:FWP.settings.map.imageExtension,maxZoom:14})),!FWP_MAP.is_filtering&&0<FWP.settings.map.locations.length?FWP_MAP.map.fitBounds(FWP_MAP.bounds):0<a.default_lat&&0<a.default_lng&&FWP_MAP.map.setCenter({lat:parseFloat(a.default_lat),lng:parseFloat(a.default_lng)})}})}(jQuery);